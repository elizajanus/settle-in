<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rentals</title>

    <!-- CSS  -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Exo:700" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/css/materialize.min.css">
    <link rel="stylesheet" href="/assets/css/apartment.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
</head>

<body>
    <nav class="grey lighten-5" role="navigation">
        <div class="nav-wrapper container grey lighten-5">
            <a id="logo-container" href="#" class="brand-logo">
                <img class="settlein" src="/assets/images/logo1.png" alt="">
            </a>
            <ul class="right hide-on-med-and-down">
                <li>
                    <a href="index.html">Home</a>
                </li>
            </ul>

            <ul id="nav-mobile" class="sidenav">
                <li>
                    <a href="sublets.html">Find a Sublet</a>
                </li>
            </ul>
            <ul id="nav-mobile" class="sidenav">
                    <li>
                        <a href="roommate-home.html">Find a Roommate</a>
                    </li>
                </ul>
            <a href="#" data-target="nav-mobile" class="sidenav-trigger">
                <i class="material-icons">menu</i>
            </a>
        </div>
    </nav>

    <div id="index-banner" class="parallax-container">
        <div class="section no-pad-bot">
            <div class="container">
                <br>
                <br>


                <div class="row center">

                    <h3 class="header col s12 light white-text headerfont">Are You Looking For A Place to Settle In?</h3>
                    <h3 class="header col s12 light white-text headerfont">Search below to find your perfect apartment or house.</h3>

                </div>

                <br>
                <br>

            </div>
        </div>
        <div class="parallax">
            <img class="back" src="/assets/images/richmond.jpg" alt="Unsplashed background img 1">
        </div>
    </div>


    <div class="container ">
        <div class="section grey lighten-3 z-depth-5 "  id="searchForm">

            <!--   Icon Section   -->
            <div class="container">
                    <div class="row">
                        <h3><strong>Search for rentals:</strong></h3>
                    </div>
                    <div class="row">
                        <form class="col s12">
                            <div class="row">
                                <div class="input-field col s3">
                                    <input id="cityName" type="text" class="validate">
                                    <label for="cityName">City</label>
                                </div>
                                <div class="input-field col s3">
                                    <input id="stateName" type="text" class="validate">
                                    <label for="stateName">State</label>
                                </div>
                                <div class="input-field col s3">
                                    <input id="price" type="text" class="validate">
                                    <label for="price">Price</label>
                                </div>
                                <div class="input-field col s3">
                                    <a class="waves-effect waves-light btn" id="submit-btn">Submit</a>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
        </div>
        <div style="margin:50px" class="row" id="searchResults">
        </div>
    </div>


        <div class="parallax-container valign-wrapper">
            <div class="section no-pad-bot">
                <div class="container">
                    <div class="row center">
                        <h5 class="header col s12 light">Didn't find what you were looking for? Try one of the following links.</h5>
                    </div>
                    <div class="row center">
                        
                        <a href="sublets.html" id="download-button" class="btn-large waves-effect waves-light blue darken-3 ">Find a sublet</a>
                        <a href="roommate-home.html" id="download-button" class="btn-large waves-effect waves-light blue darken-3 ">Find a roommate</a>
                    </div>
                </div>
            </div>
            <div class="parallax">
                <img class="back" src="/assets/images/richmond3.jpg" alt="Unsplashed background img 2">
            </div>
        </div>

        <footer class="page-footer blue darken-3">
                <div class="container">
                    <div class="row">
                        <div class="col l12 s12">
                            <h5 class="white-text center">SettleIn</h5>
                            <p class="grey-text text-lighten-4">SettleIn was built with the renter in mind. Cut down on the time you spend searching website after website for
                                outdated posts and unreliable information. With SettleIn, you can rest assured that you'll will find the best match for your roommates and your apartment
                                or house. This website will always reflect current and vetted postings for apartments. Coming soon: reviews on Landlords and Management Companies. Be sure to check
                                in soon to see just how your potential landlord stacks up!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="footer-copyright">
                    <div class="container center">
                        Created by: 
                        <a class="grey-text text-lighten-3" href="https://github.com/elizajanus">Eliza Janus</a>
                        |
                        <a class="grey-text text-lighten-3" href="https://github.com/KarenBrant">Karen Brant</a>
                        |
                        <a class="grey-text text-lighten-3" href="https://github.com/koeaves">Katherine Eaves</a>
                        |
                        <a class="grey-text text-lighten-3" href="https://github.com/sophbee">Sophia Butterworth</a>
                        |
                        <a class="grey-text text-lighten-3" href="https://github.com/Willamponsah">William Amponsah</a>
                    </div>
                </div>
            </footer>
        </body>
</html>
            <!--  Scripts-->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
        <script type="text/javascript" src="/assets/js/home.js"></script>
        <script type="text/javascript" src="/assets/js/rentals.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/js/materialize.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#submit-btn").on("click", function(event) {
                    event.preventDefault();
        
                    var cityName = $("#cityName").val().trim();
                    var stateName = $("#stateName").val().trim();
                    var price = $("#price").val().trim();
        
                    var newQuery = {};
        
                    if (cityName !== "")
                        newQuery.cityName = cityName;
                    if (stateName !== "")
                        newQuery.stateName = stateName;
                    if (price !== "")
                        newQuery.price = price;
        
                    console.log("client", newQuery);
        
                    $.get("/api/rentals", newQuery, function (data) {
                        $("#searchResults").html("");
                        if (data.length > 0) {
                            console.log("response", data);
                            $.map(data, function(item) {
                                $("#searchResults").append(`
                                    <div class="card col s12 m6 l4">
                                        <div class="card-image">
                                            <div class="slider">
                                                <ul class="slides">
                                                    <li><img src="${item.imageOne}"/></li>
                                                    <li><img src="${item.imageTwo}"/></li>
                                                    <li><img src="${item.imageThree}"/></li>
                                                    <li><img src="${item.imageFour}"/></li>
                                                </ul>
                                            </div>
                                        </div>
        
                                        <div class="card-content">
                                            <p>
                                                <strong>Address:</strong> ${item.streetAddress1} ${!item.streetAddress2 ? '' : item.streetAddress2} ${item.cityName}, ${item.stateName} ${item.zipCode}
                                                <br>
                                                <strong>Rent:</strong> $${item.price}
                                                <br>
                                                <strong>Beds:</strong> ${item.beds}
                                                <br>
                                                <strong>Baths:</strong> ${item.baths}
                                                <br>
                                                <strong>Square Feet:</strong> ${item.sqFeet}
                                                <br>
                                                <strong>Pets Allowed:</strong> ${item.pets}
                                                <br>
                                                <strong>Managed by:</strong> ${item.landlord}
                                                <br>
                                                <strong>Contact Info:</strong> ${item.managementContactInfo}
                                            </p>
                                        </div>
                                    </div>
                                `)
        
                                $("#cityName").val("");
                                $("#stateName").val("");
                                $("#price").val("");
                            });
                            $(".slider").slider();
                        } else {
                            $("#searchResults").append(`
                                <div class="container">
                                <h3>Please try again or click Submit to see all available listings.</h3>
                                </div>
                            `)

                            $("#cityName").val("");
                            $("#stateName").val("");
                            $("#price").val("");
                        }
                    });
                });
            });
        </script>

    

