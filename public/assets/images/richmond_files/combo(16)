YUI.add("hermes-template-account-menu",function(a,n){var e=a.Template.Handlebars.revive({1:function(a,n,e,t,l){var s,r=null!=n?n:{},u=e.helperMissing,i=a.escapeExpression;return'\t<div class="c-account-menu">\n\t\t<div class="c-account-buddyicon">\n\t\t\t<a href="/account"\n\t\t\t\ttabindex="0"\n\t\t\t\taria-haspopup="true"\n\t\t\t\taria-expanded="false"\n\t\t\t\taria-label="'+i((e.intlMessage||n&&n.intlMessage||u).call(r,{name:"intlMessage",hash:{intlName:"autosuggest.YOUR_ACCOUNT"},data:l}))+'">\n\t\t\t\t<div class="avatar person tiny" style="background-image: url('+i(a.lambda(null!=(s=null!=(s=null!=n?n.user:n)?s.buddyicon:s)?s.default:s,n))+')"></div>\n\t\t\t</a>\n\n\t\t\t'+(null!=(s=(e.isNotFlipped||n&&n.isNotFlipped||u).call(r,"notifications-menu",{name:"isNotFlipped",hash:{},fn:a.program(2,l,0),inverse:a.noop,data:l}))?s:"")+"\n\t\t</div>\n\t</div>\n"},2:function(a,n,e,t,l){var s;return null!=(s=e.if.call(null!=n?n:{},null!=(s=null!=n?n.user:n)?s.unreadMessages:s,{name:"if",hash:{},fn:a.program(3,l,0),inverse:a.noop,data:l}))?s:""},3:function(a,n,e,t,l){var s;return'<span class="c-account-unreadcount">'+a.escapeExpression(a.lambda(null!=(s=null!=n?n.user:n)?s.unreadMessages:s,n))+"</span>"},compiler:[7,">= 4.0.0"],main:function(a,n,e,t,l){var s;return null!=(s=e.if.call(null!=n?n:{},null!=(s=null!=n?n.user:n)?s.signedIn:s,{name:"if",hash:{},fn:a.program(1,l,0),inverse:a.noop,data:l}))?s:""},useData:!0}),t={};a.Array.each([],function(n){var e=a.Template.get("hermes/"+n);e&&(t[n]=e)}),a.Template.register("hermes/account-menu",function(n,l){return l=l||{},l.partials=l.partials?a.merge(t,l.partials):t,e(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-greetings",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,l,s){var t,u=a.lambda,i=a.escapeExpression,m=null!=e?e:{},h=n.helperMissing;return"<h4>Hola, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SPANISH"},data:s}))+"</p>\n<h4>Guten Tag, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_GERMAN"},data:s}))+"</p>\n<h4>Servus, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_GERMAN"},data:s}))+"</p>\n<h4>G&rsquo;day, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_AUSTRALIAN"},data:s}))+"</p>\n<h4>Hoi, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_DUTCH"},data:s}))+"</p>\n<h4>Yo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:s}))+"</p>\n<h4>Hi, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:s}))+"</p>\n<h4>Oi, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:s}))+"</p>\n<h4>Hala, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ARABIC"},data:s}))+"</p>\n<h4>Ahoy, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:s}))+"</p>\n<h4>Hello, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:s}))+"</p>\n<h4>Bonjour, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_FRENCH"},data:s}))+"</p>\n<h4>Salut, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_FRENCH"},data:s}))+"</p>\n<h4>Salaam, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ARABIC"},data:s}))+"</p>\n<h4>Ciao, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ITALIAN"},data:s}))+"</p>\n<h4>Hola, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SPANISH"},data:s}))+"</p>\n<h4>Hej, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SWEDISH"},data:s}))+"</p>\n<h4>Aloha, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HAWAIIAN"},data:s}))+"</p>\n<h4>Kumusta, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_TAGALOG"},data:s}))+"</p>\n<h4>Shalom, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HEBREW"},data:s}))+"</p>\n<h4>'Allo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ENGLISH"},data:s}))+"</p>\n<h4>Namaste, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HINDI"},data:s}))+"</p>\n<h4>Ni hao, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_MANDARIN"},data:s}))+"</p>\n<h4>Ol&aacute;, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_PORTUGUESE"},data:s}))+"</p>\n<h4>P&euml;rsh&euml;ndetje, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ALBANIAN"},data:s}))+"</p>\n<h4>Tere, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ESTONIAN"},data:s}))+"</p>\n<h4>Yasou, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_GREEK"},data:s}))+"</p>\n<h4>Szia, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HUNGARIAN"},data:s}))+"</p>\n<h4>Mbote, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_LINGALA"},data:s}))+"</p>\n<h4>Jambo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SWAHILI"},data:s}))+"</p>\n<h4>Moyo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_TSHILUBA"},data:s}))+"</p>\n<h4>Merhaba, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_TURKISH"},data:s}))+"</p>\n<h4>Mingalaba, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BURMESE"},data:s}))+"</p>\n<h4>G&#243;&#240;an daginn, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ICELANDIC"},data:s}))+"</p>\n<h4>Sawubona, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ZULU"},data:s}))+"</p>\n<h4>Bangawoyo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_KOREAN"},data:s}))+"</p>\n<h4>F&aacute;ilte, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_IRISH"},data:s}))+"</p>\n<h4>Labdien, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_LATVIAN"},data:s}))+"</p>\n<h4>Kaixo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BASQUE"},data:s}))+"</p>\n<h4>Nomoshkar, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BENGALI"},data:s}))+"</p>\n<h4>Zdrasti, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_BULGARIAN"},data:s}))+"</p>\n<h4>Bok, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_CROATIAN"},data:s}))+"</p>\n<h4>Dobr&yacute; den, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_CZECH"},data:s}))+"</p>\n<h4>Hej, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_DANISH"},data:s}))+"</p>\n<h4>Hyv&auml;&auml; p&auml;iv&auml;&auml;, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_FINNISH"},data:s}))+"</p>\n<h4>Mike, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HOPI"},data:s}))+"</p>\n<h4>Szia, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_HUNGARIAN"},data:s}))+"</p>\n<h4>Halo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_INDONESIAN"},data:s}))+"</p>\n<h4>Namaskara, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_KANNADA"},data:s}))+"</p>\n<h4>Chonî, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_KURDISH"},data:s}))+"</p>\n<h4>Labas, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_LITHUANIAN"},data:s}))+"</p>\n<h4>Selamat datang, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_MALAYSIAN"},data:s}))+"</p>\n<h4>Hei, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_NORWEGIAN"},data:s}))+"</p>\n<h4>Witaj, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_POLISH"},data:s}))+"</p>\n<h4>Bun&#x103; Ziua, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ROMANIAN"},data:s}))+"</p>\n<h4>Privet, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_RUSSIAN"},data:s}))+"</p>\n<h4>Zdravo, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SERBIAN"},data:s}))+"</p>\n<h4>Ahoj, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_SLOVAKIAN"},data:s}))+"</p>\n<h4>Pryvit, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_UKRAINIAN"},data:s}))+"</p>\n<h4>Xin ch&agrave;o, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_VIETNAMESE"},data:s}))+"</p>\n<h4>Sawubona, "+i(u(null!=(t=null!=(t=null!=e?e.attrs:e)?t.user:t)?t.username:t,e))+"!</h4><p>"+i((n.intlMessage||e&&e.intlMessage||h).call(m,{name:"intlMessage",hash:{intlName:"account-menu.GREETING_CAPTION_ZULU"},data:s}))+"</p> \n"},compiler:[7,">= 4.0.0"],main:function(a,e,n,l,s){var t,u,i;return u=null!=(u=n.randomLine||(null!=e?e.randomLine:e))?u:n.helperMissing,i={name:"randomLine",hash:{},fn:a.program(1,s,0),inverse:a.noop,data:s},t="function"==typeof u?u.call(null!=e?e:{},i):u,n.randomLine||(t=n.blockHelperMissing.call(e,t,i)),null!=t?t:""},useData:!0}),l={};a.Array.each([],function(e){var n=a.Template.get("hermes/"+e);n&&(l[e]=n)}),a.Template.register("hermes/greetings",function(e,s){return s=s||{},s.partials=s.partials?a.merge(l,s.partials):l,n(e,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-account-menu-dialog-styleguide",function(a,n){var t=a.Template.Handlebars.revive({1:function(a,n,t,l,e){var s;return'\t\t\t\t<span class="photo-count secondary">'+a.escapeExpression((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(null!=n?n:{},{name:"intlHTMLMessage",hash:{used:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.storageUsedFormatted:s,intlName:"account-menu.SPACE_USED_UNLIMITED"},data:e}))+"</span>\n"},3:function(a,n,t,l,e){var s,r=null!=n?n:{},u=a.escapeExpression;return(null!=(s=t.if.call(r,null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.photoCount:s,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.program(12,e,0),data:e}))?s:"")+'\t\t\t<span class="storage-count secondary">'+u((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(r,{name:"intlHTMLMessage",hash:{total:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.storageTotalFormatted:s,percentage:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.storageUsedPercentage:s,intlName:"account-menu.SPACE_USED_STYLEGUIDE"},data:e}))+'</span></div>\n\t\t\t<div class="bar" style="box-shadow: 0 0 0 1px #898989, inset '+u(a.lambda(null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.barWidth:s,n))+'px 0 #008ddf;">\n'},4:function(a,n,t,l,e){var s;return null!=(s=t.if.call(null!=n?n:{},null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.pluralPhotos:s,{name:"if",hash:{},fn:a.program(5,e,0),inverse:a.program(10,e,0),data:e}))?s:""},5:function(a,n,t,l,e){var s;return null!=(s=t.if.call(null!=n?n:{},null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.oneK:s,{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.program(8,e,0),data:e}))?s:""},6:function(a,n,t,l,e){var s;return'\t\t\t\t\t<span class="photo-count secondary">'+a.escapeExpression((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(null!=n?n:{},{name:"intlHTMLMessage",hash:{num:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.photoCount:s,intlName:"account-menu.PHOTO_COUNT_1K"},data:e}))+"</span>\n"},8:function(a,n,t,l,e){var s;return'\t\t\t\t\t<span class="photo-count secondary">'+a.escapeExpression((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(null!=n?n:{},{name:"intlHTMLMessage",hash:{num:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.photoCount:s,intlName:"account-menu.PHOTO_COUNT_MANY"},data:e}))+"</span>\n"},10:function(a,n,t,l,e){return'\t\t\t\t<span class="photo-count secondary">'+a.escapeExpression((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(null!=n?n:{},{name:"intlHTMLMessage",hash:{intlName:"account-menu.PHOTO_COUNT_ONE"},data:e}))+"</span>\n"},12:function(a,n,t,l,e){return'\t\t\t\t<span class="photo-count secondary">'+a.escapeExpression((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(null!=n?n:{},{name:"intlHTMLMessage",hash:{intlName:"account-menu.PHOTO_COUNT_NONE"},data:e}))+"</span>\n"},14:function(a,n,t,l,e){var s;return null!=(s=t.if.call(null!=n?n:{},null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.canBuyPro:s,{name:"if",hash:{},fn:a.program(15,e,0),inverse:a.program(17,e,0),data:e}))?s:""},15:function(a,n,t,l,e){return'\t\t\t\t<div class="upgrade">\n\t\t\t\t\t<a href="/account/upgrade/pro" data-action="follow" class="small butt">'+a.escapeExpression((t.intlMessage||n&&n.intlMessage||t.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"account-menu.GOPRO"},data:e}))+"</a>\n\t\t\t\t</div>\n"},17:function(a,n,t,l,e){var s;return"\n"+(null!=(s=(t.isNotFlipped||n&&n.isNotFlipped||t.helperMissing).call(null!=n?n:{},"enable-new-pro",{name:"isNotFlipped",hash:{},fn:a.program(18,e,0),inverse:a.noop,data:e}))?s:"")+"\n"},18:function(a,n,t,l,e){return'\n\t\t\t\t\t<div class="upgrade">\n\t\t\t\t\t\t<a href="/account/upgrade/adfree" data-action="follow" class="small butt">'+a.escapeExpression((t.intlMessage||n&&n.intlMessage||t.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"account-menu.GOADFREE"},data:e}))+"</a>\n\t\t\t\t\t</div>\n\n"},20:function(a,n,t,l,e){var s;return"<span >&nbsp;("+a.escapeExpression(a.lambda(null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.unreadMessages:s,n))+")</span>"},compiler:[7,">= 4.0.0"],main:function(a,n,t,l,e){var s,r=a.lambda,u=a.escapeExpression,i=null!=n?n:{},o=t.helperMissing;return'<div class="fluid">\n\t<div class="top-half dark" style="background-image: url('+u(r(null!=(s=null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.coverPhotoUrls:s)?s.t:s,n))+')">\n\t\t<a href="/photos/me"><span class="avatar person medium" style="background-image: url('+u(r(null!=(s=null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.buddyicon:s)?s.default:s,n))+')"></span></a>\n'+(null!=(s=a.invokePartial(l.greetings,n,{name:"greetings",data:e,indent:"\t\t",helpers:t,partials:l,decorators:a.decorators}))?s:"")+'\t</div>\n\t<div class="bottom-half light">\n\t\t<div class="labels">\n'+(null!=(s=t.if.call(i,null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.isPro:s,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?s:"")+"\t\t</div>\n\n"+(null!=(s=t.unless.call(i,null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.isNoAds:s,{name:"unless",hash:{},fn:a.program(14,e,0),inverse:a.noop,data:e}))?s:"")+'\n\n\t\t<div class="links secondary">\n\t\t\t<span class="link-wrapper">\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a href="/mail"  data-action="follow">'+u((t.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"common.FLICKRMAIL"},data:e}))+(null!=(s=t.if.call(i,null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.unreadMessages:s,{name:"if",hash:{},fn:a.program(20,e,0),inverse:a.noop,data:e}))?s:"")+'</a></li>\n\t\t\t\t\t<li><a href="https://help.yahoo.com/flickr"  data-action="follow">'+u((t.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"common.HELP"},data:e}))+'</a></li>\n\t\t\t\t\t<li><a href="/account"  data-action="follow">'+u((t.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"common.SETTINGS"},data:e}))+'</a></li>\n\t\t\t\t\t<li><a href="/logout.gne?csrf='+u(r(null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.csrf:s,n))+'"  data-action="follow">'+u((t.intlMessage||n&&n.intlMessage||o).call(i,{name:"intlMessage",hash:{intlName:"common.SIGN_OUT"},data:e}))+"</a></li>\n\t\t\t\t</ul>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>"},usePartial:!0,useData:!0}),l={};a.Array.each(["greetings"],function(n){var t=a.Template.get("hermes/"+n);t&&(l[n]=t)}),a.Template.register("hermes/account-menu-dialog-styleguide",function(n,e){return e=e||{},e.partials=e.partials?a.merge(l,e.partials):l,t(n,e)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-greetings"]});YUI.add("hermes-template-account-menu-card",function(a,n){var t=a.Template.Handlebars.revive({1:function(a,n,t,e,l){var s;return null!=(s=t.if.call(null!=n?n:{},null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.isPro:s,{name:"if",hash:{},fn:a.program(2,l,0),inverse:a.program(4,l,0),data:l}))?s:""},2:function(a,n,t,e,l){var s;return'\t\t\t\t\t<span class="storage-count tertiary">'+a.escapeExpression((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(null!=n?n:{},{name:"intlHTMLMessage",hash:{used:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.storageUsedFormatted:s,intlName:"account-menu.SPACE_USED_UNLIMITED"},data:l}))+"</span>\n"},4:function(a,n,t,e,l){var s,r=a.escapeExpression;return'\t\t\t\t\t<div class="bar" style="box-shadow: 0 0 0 1px transparent, inset '+r(a.lambda(null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.barWidth:s,n))+'px 0 #008ddf;">\n\t\t\t\t\t\t<span class="storage-count tertiary">'+r((t.intlHTMLMessage||n&&n.intlHTMLMessage||t.helperMissing).call(null!=n?n:{},{name:"intlHTMLMessage",hash:{total:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.storageTotalFormatted:s,percentage:null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.storageUsedPercentage:s,intlName:"account-menu.SPACE_USED"},data:l}))+"</span>\n\t\t\t\t\t</div>\n"},6:function(a,n,t,e,l){var s;return null!=(s=t.if.call(null!=n?n:{},null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.hasUnlimitedStorage:s,{name:"if",hash:{},fn:a.program(2,l,0),inverse:a.program(4,l,0),data:l}))?s:""},8:function(a,n,t,e,l){return'\t\t\t\t<div class="upgrade" style="display: none;">\n\t\t\t\t\t<a href="/account/upgrade/pro" data-track="accountMenuCardProClick" class="small butt"><div class="balls"></div></a>\n\t\t\t\t</div>\n'},10:function(a,n,t,e,l){var s;return"\n"+(null!=(s=(t.isNotFlipped||n&&n.isNotFlipped||t.helperMissing).call(null!=n?n:{},"enable-new-pro",{name:"isNotFlipped",hash:{},fn:a.program(11,l,0),inverse:a.noop,data:l}))?s:"")+"\n"},11:function(a,n,t,e,l){var s;return null!=(s=t.if.call(null!=n?n:{},null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.canBuyPro:s,{name:"if",hash:{},fn:a.program(12,l,0),inverse:a.program(14,l,0),data:l}))?s:""},12:function(a,n,t,e,l){return'\t\t\t\t\t<div class="upgrade">\n\t\t\t\t\t\t<a href="/account/upgrade/pro" data-track="accountMenuCardProClick" class="small butt">'+a.escapeExpression((t.intlMessage||n&&n.intlMessage||t.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"account-menu.GOPRO"},data:l}))+"</a>\n\t\t\t\t\t</div>\n"},14:function(a,n,t,e,l){var s;return"\n"+(null!=(s=(t.isNotFlipped||n&&n.isNotFlipped||t.helperMissing).call(null!=n?n:{},"enable-new-pro",{name:"isNotFlipped",hash:{},fn:a.program(15,l,0),inverse:a.noop,data:l}))?s:"")+"\n"},15:function(a,n,t,e,l){return'\n\t\t\t\t\t\t<div class="upgrade">\n\t\t\t\t\t\t\t<a href="/account/upgrade/adfree" data-track="accountMenuCardProClick" class="small butt">'+a.escapeExpression((t.intlMessage||n&&n.intlMessage||t.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"account-menu.GOADFREE"},data:l}))+"</a>\n\t\t\t\t\t\t</div>\n\n"},17:function(a,n,t,e,l){return" with-notifs"},19:function(a,n,t,e,l){var s,r=null!=n?n:{};return'<li><a href="/mail"  data-track="accountMenuMailClick">'+a.escapeExpression((t.intlMessage||n&&n.intlMessage||t.helperMissing).call(r,{name:"intlMessage",hash:{intlName:"common.FLICKRMAIL"},data:l}))+(null!=(s=t.if.call(r,null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.unreadMessages:s,{name:"if",hash:{},fn:a.program(20,l,0),inverse:a.noop,data:l}))?s:"")+"</a></li>"},20:function(a,n,t,e,l){var s;return"<span >&nbsp;("+a.escapeExpression(a.lambda(null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.unreadMessages:s,n))+")</span>"},compiler:[7,">= 4.0.0"],main:function(a,n,t,e,l){var s,r=null!=n?n:{},i=t.helperMissing,u=a.lambda,o=a.escapeExpression;return'<div class="fluid account-menu-card">\n\t<div class="title">\n'+(null!=(s=a.invokePartial(e.greetings,n,{name:"greetings",data:l,indent:"\t\t",helpers:t,partials:e,decorators:a.decorators}))?s:"")+'\t</div>\n\t<div class="info">\n\t\t<div class="labels">\n\n'+(null!=(s=(t.isNotFlipped||n&&n.isNotFlipped||i).call(r,"enable-new-pro",{name:"isNotFlipped",hash:{},fn:a.program(1,l,0),inverse:a.noop,data:l}))?s:"")+(null!=(s=(t.isFlipped||n&&n.isFlipped||i).call(r,"enable-new-pro",{name:"isFlipped",hash:{},fn:a.program(6,l,0),inverse:a.noop,data:l}))?s:"")+"\n\t\t</div>\n\n"+(null!=(s=(t.isFlipped||n&&n.isFlipped||i).call(r,"enable-new-pro",{name:"isFlipped",hash:{},fn:a.program(8,l,0),inverse:a.noop,data:l}))?s:"")+"\n"+(null!=(s=t.unless.call(r,null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.isNoAds:s,{name:"unless",hash:{},fn:a.program(10,l,0),inverse:a.noop,data:l}))?s:"")+'\n\n\t\t<div class="links secondary">\n\t\t\t<span class="link-wrapper'+(null!=(s=(t.isFlipped||n&&n.isFlipped||i).call(r,"notifications-menu",{name:"isFlipped",hash:{},fn:a.program(17,l,0),inverse:a.noop,data:l}))?s:"")+'">\n\t\t\t\t<ul>\n\t\t\t\t\t'+(null!=(s=(t.isNotFlipped||n&&n.isNotFlipped||i).call(r,"notifications-menu",{name:"isNotFlipped",hash:{},fn:a.program(19,l,0),inverse:a.noop,data:l}))?s:"")+'\n\n\t\t\t\t\t<li><a href="//help.yahoo.com/kb/index?page=product&locale='+o(u(null!=(s=null!=n?n.attrs:n)?s.helpLocaleKey:s,n))+'&y=PROD_FLICKR_DESK&actp=productlink"  data-track="accountMenuHelpClick">'+o((t.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"common.HELP"},data:l}))+'</a></li>\n\n\t\t\t\t\t<li><a href="/account" data-track="accountMenuWalletClick">'+o((t.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"common.SETTINGS"},data:l}))+'</a></li>\n\n\t\t\t\t\t<li><a href="/logout.gne?csrf='+o(u(null!=(s=null!=(s=null!=n?n.attrs:n)?s.user:s)?s.csrf:s,n))+'"  data-track="accountMenuSignoutClick">'+o((t.intlMessage||n&&n.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"common.SIGN_OUT"},data:l}))+"</a></li>\n\t\t\t\t</ul>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n"},usePartial:!0,useData:!0}),e={};a.Array.each(["greetings"],function(n){var t=a.Template.get("hermes/"+n);t&&(e[n]=t)}),a.Template.register("hermes/account-menu-card",function(n,l){return l=l||{},l.partials=l.partials?a.merge(e,l.partials):e,t(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-greetings"]});YUI.add("hermes-template-account-menu-card-get-pro-button",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,t,l){return'\t<div class="upgrade">\n\t\t<a href="/account/upgrade/pro" data-action="follow" class="small butt">'+a.escapeExpression((n.intlMessage||e&&e.intlMessage||n.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"account-menu.GETPRO"},data:l}))+"</a>\n\t</div>\n"},3:function(a,e,n,t,l){return'\t<div class="upgrade">\n\t\t<a href="/account/upgrade/pro" data-action="follow" class="small butt">'+a.escapeExpression((n.intlMessage||e&&e.intlMessage||n.helperMissing).call(null!=e?e:{},{name:"intlMessage",hash:{intlName:"account-menu.RESUBSCRIBE_TO_PRO"},data:l}))+"</a>\n\t</div>\n"},compiler:[7,">= 4.0.0"],main:function(a,e,n,t,l){var s,r=null!=e?e:{};return(null!=(s=n.if.call(r,null!=e?e.canPurchase:e,{name:"if",hash:{},fn:a.program(1,l,0),inverse:a.noop,data:l}))?s:"")+(null!=(s=n.if.call(r,null!=e?e.canResubscribe:e,{name:"if",hash:{},fn:a.program(3,l,0),inverse:a.noop,data:l}))?s:"")},useData:!0}),t={};a.Array.each([],function(e){var n=a.Template.get("hermes/"+e);n&&(t[e]=n)}),a.Template.register("hermes/account-menu-card-get-pro-button",function(e,l){return l=l||{},l.partials=l.partials?a.merge(t,l.partials):t,n(e,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("products-api-helper",function(e,o){e.ProductsAPIHelper={parseOrder:function(e,o){var t,r,i,s,d;if(d={},t=o.orderRegistry,e.orderId&&(e.id=e.orderId),e.couponMetadata&&!e.couponMetadata.isValidCoupon)throw s=new Error(e.couponMetadata.invalidReason),s.name="CouponInvalidError",s;return e.coupons&&(d.coupon=this.parseCoupons(e.coupons.coupon,e.couponMetadata,e.orderId,o),(i=d.coupon.getValue("discounts").getList()[0])&&"percent"===i.getValue("discountType")&&100===parseInt(i.getValue("discountValue"),10)?d.isFreeOrder=1:d.isFreeOrder=0),e.item&&(d.items=this.parseItems(e.item,e.id,o)),d.orderId=e.orderId,d.statusOrder=e.statusOrder,d.statusPrint=e.statusPrint,d.statusPayment=e.statusPayment,d.paymentMethodId=e.paymentMethodId,d.bookPreviewPdf=e.bookPreviewPdf,d.userId=e.userId,d.trackingNum=e.trackingNum,d.trackingUrl=e.trackingUrl,d.costTotal=parseFloat(e.costTotal)||0,d.costProducts=parseFloat(e.costProducts)||0,d.costShipping=e.costShipping||0,d.costDiscount=e.costDiscount||0,d.costTax=e.costTax,d.isCouponApplied=e.isCouponApplied,d.shippingType=e.shippingType||e.shipMethod||"standard_shipping",d.dateCreate=e.dateCreate,e.countryCode&&(d.countryCode=e.countryCode),t.exists(e.orderId)?((r=t.proxy(e.orderId)).setValues(d),r):(d.id=e.orderId,t.add(d))},parseCoupons:function(e,o,t,r){var i,s,d,p,a,n,c,u,g,l;if(o&&!o.isValidCoupon)throw g=new Error(o.invalidReason),g.name="CouponInvalidError",g;return i=r.couponRegistry,s=r.discountRegistry,a=[],e.id=e.couponId,n=e.discounts.discount[0],l=n.discountId,u={costDiscount:n.costDiscount,couponId:e.id,discountType:n.discountType,discountValue:n.discountValue,minPurchaseValue:n.minPurchaseValue,productEntity:n.productEntity},s.exists(l)?(s.setValues(l,u),c=s.proxy(l)):(u.id=l,c=s.add(u)),a.push(c),d={code:e.code,orderId:t,discounts:a},o&&(d.isSingleUse=o.isSingleUse,d.isUserSpecific=o.isUserSpecific,d.isValidCoupon=o.isValidCoupon),i.exists(e.id)?(i.setValues(e.id,d),p=i.proxy(e.id)):(d.id=e.id,p=i.add(d)),p},parseItems:function(e,o,t){var r,i,s;return r=t.orderItemRegistry,i=t.itemPriceRegistry,e instanceof Array&&(e=e[0]),e=e.map(function(e){var t,d,p,a,n=e.renderedProductId,c={};return c.sourceProductId=e.sourceProductId,c.productType=e.productType,c.productTitle=e.productTitle,c.quantity=e.quantity,c.cost=e.costProductUnit,c.orderId=o,e.productPrice&&(p=e.productPrice,s={priceBase:p.priceBase,countPagesBase:p.countPagesBase,countPagesExtra:p.countPagesExtra,pricePerPage:p.pricePerPage,pricePagesExtra:p.pricePagesExtra,priceTotal:p.priceTotal},p.shipping&&((a=p.shipping).standardShipping&&(s.standardShippingBase=a.standardShipping.priceShippingBase,s.standardShippingExtra=a.standardShipping.priceShippingExtra),a.expressShipping&&(s.expressShippingBase=a.expressShipping.priceShippingBase,s.expressShippingExtra=a.expressShipping.priceShippingExtra)),i.exists(n)?(t=i.proxy(n)).setValues(s):(s.id=n,t=i.add(s))),e.product&&e.product.skuId&&(c.skuId=e.product.skuId),c.price=t,r.exists(n)?((d=r.proxy(n)).setValues(c),d):(c.id=n,r.add(c))})},parseBook:function(o,t){var r,i=o,s=t.pageModelRegistry,d=t.bookModelRegistry,p=t.pagePhotoModelRegistry,a=t.photoModelRegistry,n=t.personRegistry,c=t.photoEngagementRegistry,u=t.photoStatsRegistry,g=[];if(i)return o={id:i.id,owner:i.owner,title:i.title,coverPhotoId:i.coverPageId,totalPhotos:0,price:i.price,created:i.dateCreate},i.page&&e.Array(i.page).forEach(function(t){var i,d=[];t.photo&&e.Array(t.photo).forEach(function(i){var s,g;e.Lang.isNumber(parseInt(i.id,10))&&(t.id=String(t.id).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),s={id:t.id+"_"+i.position,bookId:o.id,position:i.position,cropX:i.cropX/100,cropY:i.cropY/100,cropW:i.cropW/100,cropH:i.cropH/100,invalidForPrintReason:i.invalidForPrintReason,isInvalidForPrint:i.isInvalidForPrint},g=e.APIHelper.response.parsePhotos({photos:[i],personModelRegistry:n,photoModelRegistry:a,photoEngagementModelRegistry:c,photoStatsModelRegistry:u})[0],s.photo=g,r=s.id,p.exists(r)?(delete s.id,p.setValues(r,s)):p.add(s),d.push(p.proxy(r)))}),(i=e.APIHelper.response.parsePage(t)).bookId=o.id,i.pagePhotos=d,r=i.id,s.exists(r)?(delete i.id,s.setValues(r,i),t=s.proxy(r)):t=s.add(i),g.push(r),o.totalPhotos=o.totalPhotos+d.length,o.coverPage||(o.coverPage=t)}),o.pageOrder=g,d.exists(o.id)?d.setValues(o.id,{title:o.title,pageOrder:o.pageOrder,totalPhotos:o.totalPhotos,coverPage:o.coverPage}):d.add(o),o},parseSubscriptionCoupon:function(e,o){var t,r,i,s,d,p,a,n;return t=o.couponRegistry,r=o.discountRegistry,d=e.discount,e.id=d.couponCode,n=d.discountId,a={costDiscount:d.costDiscount,couponId:e.id,discountType:d.discountType,discountValue:d.discountValue,minPurchaseValue:d.minPurchaseValue,productEntity:d.productEntity},r.exists(n)?(r.setValues(n,a),p=r.proxy(n)):(a.id=n,p=r.add(a)),i={code:d.couponCode,subscriptionId:e.subscriptionId,discounts:[p],isValidCoupon:"ok"===e.stat},t.exists(e.id)?(t.setValues(e.id,i),s=t.proxy(e.id)):(i.id=e.id,s=t.add(i)),s}}},"@VERSION@",{requires:[]});YUI.add("flickr-products-discounts-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.Promise.resolve()},create:function(t){return e.Promise.resolve()},delete:function(t){return e.Promise.resolve()}},attributes:{costDiscount:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},couponId:{},discountType:{},discountValue:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},minPurchaseValue:{setter:function(e){return e?parseFloat(e).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(e){return parseFloat(0).toFixed(2)}},productEntity:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});YUI.add("flickr-products-order-items-setQuantity-updater",function(r,t){"use strict";r.namespace("ModelUpdaters")["flickr-products-order-items-setQuantity-updater"]={run:function(e,i){return i.callAPI("flickr.products.orders.setItemQuantity",e).then(function(r){},r.FetcherErrorLogger(t))}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("products-order-item-models",function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{update:function(e,r){var i;return"quantity"in r?(i={order_id:this.getValue(e,"orderId"),product_id:e,quantity:r.quantity.newVal},t.ModelUpdaters["flickr-products-order-items-setQuantity-updater"].run(i,this.appContext)):t.Promise.resolve()}},attributes:{orderId:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},sourceProductId:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},productType:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},productTitle:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},quantity:{validator:function(e,r){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)}},cost:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},skuId:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},price:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-products-order-items-setQuantity-updater"]});YUI.add("products-order-item-price-models",function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,attributes:{orderItemId:{validator:function(e,r){return t.AttributeHelpers.validateString(e)},setter:function(e){return t.AttributeHelpers.coerceString(e)}},priceBase:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}},countPagesBase:{getter:function(t){return parseInt(t,10)},validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)}},countPagesExtra:{getter:function(t){return parseInt(t,10)},validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)}},pricePerPage:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}},pricePagesExtra:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}},priceTotal:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}},standardShippingBase:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}},standardShippingExtra:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}},expressShippingBase:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}},expressShippingExtra:{setter:function(t){return t?parseFloat(t).toFixed(2):parseFloat(0).toFixed(2)},defaultFn:function(t){return parseFloat(0).toFixed(2)}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-products-order-items-setQuantity-updater"]});YUI.add("flickr-products-orders-removeCoupon-deletor",function(r,e){"use strict";r.namespace("ModelDeletors")["flickr-products-orders-removeCoupon"]={run:function(o,s){return new r.FlickrPromise({response:s.callAPI("flickr.products.orders.removeCoupon",this._processParams(o)),orderRegistry:s.getModelRegistry("flickr-products-orders-models"),couponRegistry:s.getModelRegistry("flickr-products-coupons-models"),discountRegistry:s.getModelRegistry("flickr-products-discounts-models"),itemRegistry:s.getModelRegistry("products-order-item-models"),itemPriceRegistry:s.getModelRegistry("products-order-item-price-models")}).then(this._processResponse,r.FetcherErrorLogger(e))},_processParams:function(r){var e={};return e.order_id=r.orderId,e.coupon_code=r.couponCode,e},_processResponse:function(e){var o,s,t,d,i,c,p;return p=e.response,o=e.orderRegistry,s=e.couponRegistry,t=e.discountRegistry,d=e.itemRegistry,i=e.itemPriceRegistry,c={orderRegistry:o,orderItemRegistry:d,itemPriceRegistry:i,couponRegistry:s,discountRegistry:t},o.remove(p.order.orderId),r.ProductsAPIHelper.parseOrder(p.order,c)}}},"@VERSION@",{requires:["flickr-promise","products-api-helper"],optional:["flickr-products-orders-models","flickr-products-coupons-models","flickr-products-discounts-models","products-order-item-models","products-order-item-price-models"]});YUI.add("flickr-products-coupons-models",function(e){function r(e){r.superclass.constructor.call(this,e)}e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,remote:{read:function(r){return e.Promise.resolve()},create:function(r){return e.ModelCreators["flickr-products-orders-applyCoupon"].run(r,this.appContext)},delete:function(r,o){return o={couponCode:this.getValue(r,"code"),orderId:this.getValue(r,"orderId")},e.ModelDeletors["flickr-products-orders-removeCoupon"].run(o,this.appContext)}},attributes:{code:{},orderId:{},discounts:{isListProxy:!0},isValidCoupon:{},isUserSpecific:{},isSingleUse:{},invalidReason:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-products-orders-applyCoupon-creator","flickr-products-orders-removeCoupon-deletor"]});YUI.add("flickr-products-orders-create-creator",function(r,e){"use strict";r.namespace("ModelCreators")["flickr-products-orders-create"]={run:function(s,o){var t=this;return new r.FlickrPromise({response:o.callAPI("flickr.products.orders.create",this._processParams(s)),orderRegistry:o.getModelRegistry("flickr-products-orders-models"),couponRegistry:o.getModelRegistry("flickr-products-coupons-models"),discountRegistry:o.getModelRegistry("flickr-products-discounts-models"),itemRegistry:o.getModelRegistry("products-order-item-models"),itemPriceRegistry:o.getModelRegistry("products-order-item-price-models")}).then(function(r){return t._processResponse(r,s,o)},r.FetcherErrorLogger(e))},_processParams:function(r){var e={};return r=r||{},e.items=r.bookId||r.items,e.cacheBust=Date.now(),e},_processResponse:function(e,s,o){var t,i,c,d,u,n,p;return p=e.response,t=e.orderRegistry,i=e.couponRegistry,c=e.discountRegistry,d=e.itemRegistry,u=e.itemPriceRegistry,n={orderRegistry:t,orderItemRegistry:d,itemPriceRegistry:u,couponRegistry:i,discountRegistry:c},r.ProductsAPIHelper.parseOrder(p.order,n)}}},"@VERSION@",{requires:["flickr-promise","flickr-products-orders-models","flickr-products-coupons-models","flickr-products-discounts-models","products-order-item-models","products-order-item-price-models"],optional:[]});YUI.add("flickr-products-subscriptions-orders-create-creator",function(r,s){"use strict";var t={1:"Flickr Pro",2:"Flickr Pro",3:"Flickr Pro",4:"Ad Free",6:"Ad Free",7:"Flickr Pro",8:"Flickr Pro"},a={1:"3 months",2:"1 year",3:"2 years",4:"1 year",6:"1 month",7:"1 month",8:"1 year"};r.namespace("ModelCreators")["flickr-products-subscriptions-orders-create"]={run:function(t,a){var e=this;return r.Promise.all([a.callAPI("flickr.subscriptions.braintree.initiateSubscription",this._processParams(t)),a.getModelRegistry("flickr-products-orders-models")]).then(function(r){return e._processResponse(r,t)},r.FetcherErrorLogger(s))},_processParams:function(r){var s={};return r=r||{},s.plan_type=r.planType,s.cache_bust=Date.now(),s},_processResponse:function(r,s){var e,o=r[0].subscription,n=r[1];return o?e=n.exists(o.subscriptionId)?n.get(o.orderId):n.add({id:o.subscriptionId||null,productName:o.planData.productClassId&&s.planType?t[s.planType]+" "+a[s.planType]:o.planData.name,subscriptionDuration:o.planData.length||0,orderId:o.subscriptionId||null,costTotal:parseFloat(o.planData.price)||0,costProducts:parseFloat(o.planData.costProducts)||0,costShipping:parseFloat(o.planData.costShipping)||0,costTax:o.planData.costTax||0,statusPrint:o.planData.statusPrint||null,statusPayment:o.planData.statusPayment||null,orderType:"subscription"}):console.warn("flickr-products-subscriptions-orders-create-creator: No API response?"),e}}},"@VERSION@",{requires:["flickr-promise","flickr-products-orders-models"],optional:[]});YUI.add("flickr-products-books-editPage-updater",function(o,e){"use strict";o.namespace("ModelUpdaters")["flickr-products-books-editPage"]={run:function(r,t){var d={};return d.page_id=r.pageId,d.book_id=r.bookId,r.templateId&&(d.template_id=r.templateId),r.backgroundColor&&(d.background_color=r.backgroundColor),t.callAPI("flickr.products.books.editPage",d).then(null,o.FetcherErrorLogger(e))}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("flickr-products-books-getPage-fetcher",function(e,o){"use strict";e.namespace("ModelFetchers")["flickr-products-books-getPage"]={run:function(t,r){var s=this;return e.Promise.all([r.callAPI("flickr.products.books.getPage",this._processParams(t)),r.getModelRegistry("page-models")]).then(function(e){return s._processResponse(e,t)},e.FetcherErrorLogger(o))},_processParams:function(o){var t={extras:e.APIHelper.request.getRebootPhotoExtras(),book_id:o.bookId,page_id:o.id};return o.page=o.page||1,o.perPage=o.perPage||100,t},_processResponse:function(e,o){var t=e[0],r=e[1],s={id:o.id,photo:[]},a=[];r.exists(o.id)&&(!!(a=r.getValue(o.id,"photoList").getList()).hasMinBoundary&&a.hasMinBoundary(),!!a.hasMaxBoundary&&a.hasMaxBoundary()),s.pageNumber=t.pageNumber,s.template=parseInt(t.template,10),s.countPhotos=t.countPhotos,s.photo=t.photo,s.backgroundColor=t.backgroundColor,r.exists(o.id)?r.setValue(o.id,"photoList",s.photoList):r.add(s)}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-models"]});YUI.add("flickr-products-books-setPagePhoto-updater",function(o,e){"use strict";o.namespace("ModelUpdaters")["flickr-products-books-setPagePhoto"]={run:function(t,r){var s={};return s.page_id=t.pageId,s.book_id=t.bookId,s.position=t.position,s.photo_id=t.photoId,s.crop_x=Math.round(Math.abs(100*t.cropX)),s.crop_y=Math.round(Math.abs(100*t.cropY)),s.crop_w=Math.round(Math.abs(100*t.cropW)),s.crop_h=Math.round(Math.abs(100*t.cropH)),s.extras=o.APIHelper.request.getRebootPhotoExtras(),o.Promise.all([r.callAPI("flickr.products.books.setPagePhoto",s),r.getModelRegistry("page-models"),r.getModelRegistry("book-page-photo-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-engagement-models")]).then(function(e){return(function(e,t){var r,s,d=e[0],p=e[1],a=e[2],i=e[3],n=e[4],l=e[5],c=d.page,g=[];c&&(c.photo&&o.Array(c.photo).forEach(function(e){var r,d,p,h;r={id:c.id+"_"+e.position,bookId:t.bookId,position:e.position,cropX:e.cropX/100,cropY:e.cropY/100,cropW:e.cropW/100,cropH:e.cropH/100,invalidForPrintReason:e.invalidForPrintReason,isInvalidForPrint:e.isInvalidForPrint},p=(d=o.APIHelper.response.parsePhoto(e)).owner,h=d.engagement,s=p.id,n.exists(s)?(delete p.id,n.setValues(s,p)):n.add(p),d.owner=n.proxy(s),s=h.id,l.exists(s)?(delete h.id,l.setValues(s,h)):l.add(h),d.engagement=l.proxy(s),s=d.id,i.exists(s)?(delete d.id,i.setValues(s,d)):i.add(d),r.photo=i.proxy(s),s=r.id,a.exists(s)?(delete r.id,a.setValues(s,r)):a.add(r),g.push(a.proxy(s))}),(r=o.APIHelper.response.parsePage(c)).pagePhotos=g,s=r.id,p.exists(s)?(delete r.id,p.setValues(s,r)):p.add(r))})(e,t)},o.FetcherErrorLogger(e))}}},"@VERSION@",{requires:["flickr-promise"],optional:["page-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});YUI.add("book-page-photo-models",function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(t){},create:function(e){return t.ModelUpdaters["flickr-products-books-setPagePhoto"].run({create:!0,pageId:e.pageId,bookId:e.bookId,position:1,photoId:e.photoId,template:2,cropX:0,cropY:0,cropW:0,cropH:0},this.appContext)},update:function(e,r){return t.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:this.getValue(e,"bookId")},this.appContext)}},attributes:{bookId:{getter:function(t){return parseInt(t,10)},validator:function(e){return t.AttributeHelpers.validateInteger(e)},setter:function(e){return t.AttributeHelpers.coerceInteger(e)}},photo:{isModel:!0},cropW:{setter:function(t){return Math.abs(t)||0},getter:function(t){return parseFloat(t,10)||0},defaultFn:function(){return 0},defaultValue:0},cropH:{setter:function(t){return Math.abs(t)||0},getter:function(t){return parseFloat(t,10)||0},defaultFn:function(){return 0},defaultValue:0},cropX:{setter:function(t){return Math.abs(t)||0},getter:function(t){return parseFloat(t,10)||0},defaultFn:function(){return 0},defaultValue:0},cropY:{setter:function(t){return Math.abs(t)||0},getter:function(t){return parseFloat(t,10)||0},defaultFn:function(){return 0},defaultValue:0},position:{defaultFn:function(){return 1},getter:function(t){return parseInt(t,10)||1},defaultValue:1},isLowQuality:{defaultFn:function(){return 0}},invalidForPrintReason:{},isInvalidForPrint:{defaultFn:function(){return 0}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-books-fetcher","flickr-products-books-setPagePhoto-updater"]});