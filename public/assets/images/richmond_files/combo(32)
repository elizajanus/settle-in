YUI.add("hermes-template-photo-note-read-mode",function(a,e){var t=a.Template.Handlebars.revive({1:function(a,e,t,l,n){return'<a href="/account/upgrade/pro" class="pro-badge-inline">PRO</a>'},compiler:[7,">= 4.0.0"],main:function(a,e,t,l,n){var r,u,s=null!=e?e:{},o=t.helperMissing,h="function",p=a.escapeExpression;return'<div class="note-text" style="z-index:'+p(typeof(u=null!=(u=t.z||(null!=e?e.z:e))?u:o)===h?u.call(s,{name:"z",hash:{},data:n}):u)+';">\n\t<div class="text-alignment-fix hyphenate" style="left:'+p(typeof(u=null!=(u=t.x||(null!=e?e.x:e))?u:o)===h?u.call(s,{name:"x",hash:{},data:n}):u)+"px;top:"+p(typeof(u=null!=(u=t.y||(null!=e?e.y:e))?u:o)===h?u.call(s,{name:"y",hash:{},data:n}):u)+'px">\n\t\t<a href="'+p(typeof(u=null!=(u=t.authorURL||(null!=e?e.authorURL:e))?u:o)===h?u.call(s,{name:"authorURL",hash:{},data:n}):u)+'" class="author">'+p(typeof(u=null!=(u=t.authorName||(null!=e?e.authorName:e))?u:o)===h?u.call(s,{name:"authorName",hash:{},data:n}):u)+"</a>"+(null!=(r=t.if.call(s,null!=e?e.authorIsPro:e,{name:"if",hash:{},fn:a.program(1,n,0),inverse:a.noop,data:n}))?r:"")+"<br>\n\t\t"+p((t.renderTrustedMarkup||e&&e.renderTrustedMarkup||o).call(s,null!=e?e.text:e,{name:"renderTrustedMarkup",hash:{},data:n}))+"\n\t</div>\n</div>"},useData:!0}),l={};a.Array.each([],function(e){var t=a.Template.get("hermes/"+e);t&&(l[e]=t)}),a.Template.register("hermes/photo-note-read-mode",function(e,n){return n=n||{},n.partials=n.partials?a.merge(l,n.partials):l,t(e,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-note-write-mode",function(e,t){var a=e.Template.Handlebars.revive({1:function(e,t,a,n,l){return'<button class="delete-note danger tiny">'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"common.DELETE"},data:l}))+"</button>"},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,l){var s,i,o=null!=t?t:{},r=a.helperMissing,c="function",m=e.escapeExpression;return'<div class="note-text adding" data-for-note-yuid="'+m(typeof(i=null!=(i=a.noteYUID||(null!=t?t.noteYUID:t))?i:r)===c?i.call(o,{name:"noteYUID",hash:{},data:l}):i)+'" style="z-index:'+m(typeof(i=null!=(i=a.z||(null!=t?t.z:t))?i:r)===c?i.call(o,{name:"z",hash:{},data:l}):i)+';">\n\t<div class="text-alignment-fix hyphenate" style="left:'+m(typeof(i=null!=(i=a.x||(null!=t?t.x:t))?i:r)===c?i.call(o,{name:"x",hash:{},data:l}):i)+"px;top:"+m(typeof(i=null!=(i=a.y||(null!=t?t.y:t))?i:r)===c?i.call(o,{name:"y",hash:{},data:l}):i)+'px">\n\t\t<textarea class="note-text-textarea" placeholder="'+m((a.intlMessage||t&&t.intlMessage||r).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_A_NOTE"},data:l}))+'">'+m(typeof(i=null!=(i=a.text||(null!=t?t.text:t))?i:r)===c?i.call(o,{name:"text",hash:{},data:l}):i)+'</textarea>\n\t\t<div class="note-text-buttons">\n\t\t\t<button class="save-note tiny">'+m((a.intlMessage||t&&t.intlMessage||r).call(o,{name:"intlMessage",hash:{intlName:"common.SAVE"},data:l}))+'</button>\n\t\t\t<button class="cancel-note alt tiny">'+m((a.intlMessage||t&&t.intlMessage||r).call(o,{name:"intlMessage",hash:{intlName:"common.CANCEL"},data:l}))+"</button>"+(null!=(s=a.if.call(o,null!=t?t.canDelete:t,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?s:"")+"\n\t\t</div>\n\t</div>\n</div>"},useData:!0}),n={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)}),e.Template.register("hermes/photo-note-write-mode",function(t,l){return l=l||{},l.partials=l.partials?e.merge(n,l.partials):n,a(t,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-note-drag-handles",function(a,e){var r=a.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(a,e,r,n,t){return'<span class="note-drag-handle note-drag-handle-tl" data-drag-resize-direction="tl"></span><span class="note-drag-handle note-drag-handle-tr" data-drag-resize-direction="tr"></span><span class="note-drag-handle note-drag-handle-br" data-drag-resize-direction="br"></span><span class="note-drag-handle note-drag-handle-bl" data-drag-resize-direction="bl"></span>'},useData:!0}),n={};a.Array.each([],function(e){var r=a.Template.get("hermes/"+e);r&&(n[e]=r)}),a.Template.register("hermes/photo-note-drag-handles",function(e,t){return t=t||{},t.partials=t.partials?a.merge(n,t.partials):n,r(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-notes-scrappy-view",function(e,t){function o(t){this.yuid=e.guid(),this.id=t.id,this.photoId=t.photoId,this.x=t.x,this.y=t.y,this.z=0,this.w=t.w,this.h=t.h,this.text=t.text,this.author=t.author,this.authorName=t.authorName,this.authorRealName=t.authorRealName,this.authorIsPro=t.authorIsPro,this.canEdit=t.canEdit,this.canDelete=t.canDelete,this.isStoredOnServer=t.isStoredOnServer}o.prototype.getScaled=function(e){return{x:this.x*e,y:this.y*e,w:this.w*e,h:this.h*e}};var i=1,n={idle:{begin:"beginIdle",end:"endIdle",events:{mousedown:"handleIdleMouseDown",mouseup:"handleIdleMouseUp",mouseenter:{handler:"handleIdleMouseEnter",delegate:".note"},mouseleave:{handler:"handleIdleMouseLeave",delegate:".note"}}},editing:{begin:"beginEditing",events:{mousedown:"handleEditingMouseDown",mouseup:"handleEditingMouseUp",keydown:"handleEditingKeyDown"}},dragging:{begin:"beginDragging",end:"endDragging",events:{mousemove:"handleDraggingMouseMove",mouseup:"handleDraggingMouseUp"}}};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.stateEventHandles=[],this},loadState:function(){var t,o=this;return t={photo:this.appContext.getModel("photo-models",this._params.photoId),photoNotes:this.appContext.getModel("photo-notes-models",this._params.photoId),noteModel:this.appContext.getModelRegistry("note-models")},this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid&&(t.viewer=this.appContext.getModel("person-models",this.appContext.getViewer().nsid)),new e.FlickrPromise(t).then(function(e){o.set("photoModel",e.photo),o.set("photoNotesModel",e.photoNotes),o.set("noteModel",e.noteModel),e.viewer&&o.set("viewer",e.viewer)})},buildContainer:function(){return this},activate:function(){var t,i,n,s,a=this.appContext.flipper.isFlipped("enable-scrappy-notes-deleting"),h=this.appContext.flipper.isFlipped("enable-scrappy-notes-editing"),r=this.get("photoModel"),d=r.getValue("owner").getValue("id"),l=this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid,g=this.get("photoNotesModel").getValue("notes").toJSON();if(r.getValue("isVideo"))return this.deactivate(),this;for(this.box=this.get("container"),this.notes=[],this.canAddNotes=r.getValue("canAddMeta"),this.canAddNotes&&this.box.setStyle("pointerEvents","auto"),this.registerEventHandler(this.box.on("mouseenter",this.revealNotes.bind(this))),this.registerEventHandler(this.box.on("mouseleave",this.hideNotes.bind(this))),this.registerEventHandler(e.on("photo:entering-vr",this.deactivate.bind(this))),i=0;i<g.length;i++)t=g[i],n=h&&(l===d||l===t.author),s=a&&(l===d||l===t.author),this.notes.push(new o({id:t.id,photoId:r.getValue("id"),x:t.left,y:t.top,w:t.width,h:t.height,text:t.text,author:t.author,authorName:t.authorName,authorRealName:t.authorRealName,authorIsPro:t.authorIsPro,canEdit:n,canDelete:s,isStoredOnServer:!0}));return this.restackNotes(),this.syncWithPhoto(),this.renderNotes(),this.revealNotes(),this.pageLoadNotesFlashTimer=setTimeout(this.hideNotes.bind(this),1e3),this.enterState("idle"),this},onParentViewEvent:function(e,t){t&&"photoWellResized"===t[0]&&this.isActivated&&this.box&&(this.syncWithPhoto(),this.renderNotes())},enterState:function(e,t){var o;if(t=t||{},n[e]){for(;this.stateEventHandles.length;)this.stateEventHandles.pop().detach();this.currentState&&n[this.currentState].end&&this[n[this.currentState].end]&&this[n[this.currentState].end].call(this,t);for(var i in n[e].events)"string"==typeof(o=n[e].events[i])?this.stateEventHandles.push(this.box.on(i,this[o].bind(this))):"object"==typeof o&&(o.delegate?this.stateEventHandles.push(this.box.delegate(i,this[o.handler].bind(this),o.delegate)):this.stateEventHandles.push(this.box.on(i,this[o.handler].bind(this))));n[e].begin&&this[n[e].begin]&&this[n[e].begin].call(this,t),this.currentState=e}},revealNotes:function(e){this.box.addClass("box-hovered"),clearTimeout(this.pageLoadNotesFlashTimer)},hideNotes:function(){this.box.removeClass("box-hovered"),this.hideHovered()},beginIdle:function(e){var t=e.element;this.box.removeClass("box-note-clicked"),delete this.draggingMemo,this.box.all(".note-text").remove(!0),t&&t.getDOMNode()&&t.removeClass("note-clicked"),e.rerender&&(this.restackNotes(),this.renderNotes())},endIdle:function(e){this.tempMouseMoveListener&&(this.tempMouseMoveListener.detach(),delete this.tempMouseMoveListener)},handleIdleMouseDown:function(t){var i,n,s,a,h=!1;1!==t.button||t.ctrlKey||t.metaKey||t.target.hasClass("note-text")||(t.target.hasClass("note")&&(i=this.getNoteByID(t.target.getAttribute("data-note-yuid"))),i&&(i.canEdit||i.canDelete)?this.enterState("editing",{note:i,element:t.target}):(s={x:t.clientX,y:t.clientY},a=this.box.getXY(),this.canAddNotes&&(t.preventDefault(),this.tempMouseMoveListener=this.box.on("mousemove",function(t){var i,r,d,l,g;if(i=Math.sqrt(Math.pow(t.clientX-s.x,2)+Math.pow(t.clientY-s.y,2)),r="",!(i<20)){switch(h||(h=!0,this.box.addClass("doing-initial-drag")),r+=s.y-t.clientY>=0?"t":"b",r+=s.x-t.clientX>=0?"l":"r"){case"tl":l=0,g=0;break;case"tr":l=8,g=0;break;case"bl":l=0,g=8;break;case"br":l=8,g=8}d=this.get("viewer"),n=new o({id:e.guid(),photoId:this.get("photoModel").getValue("id"),x:(Math.min(s.x,t.clientX)-a[0]+window.pageXOffset)/this.ratio,y:(Math.min(s.y,t.clientY)-a[1]+window.pageYOffset)/this.ratio,w:Math.abs(s.x-t.clientX)/this.ratio-l,h:Math.abs(s.y-t.clientY)/this.ratio-g,text:"",author:d.getValue("nsid"),authorName:d.getValue("username"),authorRealName:d.getValue("displayname"),authorIsPro:d.getValue("isPro"),canEdit:!0,canDelete:!0,isStoredOnServer:!1}),this.notes.push(n),this.createNewNote(n),this.storeNoteBackup(n),n.node.append(this.templates("photo-note-drag-handles")()),this.box.addClass("box-note-clicked"),n.node.addClass("note-clicked"),n.node.addClass("note-can-edit"),this.enterState("dragging",{note:n,element:n.node,dragMetadata:{type:"resize",startX:Math.min(s.x,t.clientX)+window.pageXOffset,startY:Math.min(s.y,t.clientY)+window.pageYOffset,dragHandle:n.node.one(".note-drag-handle-"+r),direction:r}})}}.bind(this)))))},handleIdleMouseUp:function(t){this.tempMouseMoveListener&&(this.tempMouseMoveListener.detach(),delete this.tempMouseMoveListener),t.target===this.box&&e.fire("photo:zoom",{x:t.pageX,y:t.pageY})},handleIdleMouseEnter:function(e){var t,o=e.target.ancestor(".note",!0),n=this.getNoteByID(o.getAttribute("data-note-yuid")),s=n.getScaled(this.ratio);this.delayedNoteMouseLeaveHandler&&(this.hideHovered(),clearTimeout(this.delayedNoteMouseLeaveHandler),delete this.delayedNoteMouseLeaveHandler),o.addClass("note-hovered"),o.insert(this.templates("photo-note-read-mode")({x:s.x,y:s.y+s.h+2,z:i,text:n.text.replace(/\n/g,"<br>"),authorName:n.authorRealName||n.authorName,authorURL:"/photos/"+n.author+"/",authorIsPro:n.authorIsPro}),"after"),(t=this.box.one(".note-text")).on("mouseenter",function(e){this.delayedNoteMouseLeaveHandler&&(clearTimeout(this.delayedNoteMouseLeaveHandler),delete this.delayedNoteMouseLeaveHandler)}.bind(this)),t.on("mouseleave",this.handleIdleMouseLeave.bind(this))},handleIdleMouseLeave:function(e){this.delayedNoteMouseLeaveHandler=setTimeout(this.hideHovered.bind(this),100)},beginEditing:function(e){var t=e.note,o=e.element,n=t.getScaled(this.ratio);this.storeNoteBackup(t),this.hideHovered(),this.box.hasClass("box-note-clicked")||this.box.addClass("box-note-clicked"),o.hasClass("note-clicked")||o.addClass("note-clicked"),0===o.siblings(".note-text.adding").size()&&o.insert(this.templates("photo-note-write-mode")({noteYUID:t.yuid,x:n.x,y:n.y+n.h+2,z:i,text:t.text.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),canDelete:t.isStoredOnServer}),"after"),o.one(".note-drag-handle")||o.append(this.templates("photo-note-drag-handles")()),setTimeout(function(){this.box.one(".note-text[data-for-note-yuid="+t.yuid+"] textarea").focus()}.bind(this),10)},handleEditingMouseDown:function(e){var t,o,i;1!==e.button||e.ctrlKey||e.metaKey||(o=e.target.ancestor(".note",!0))&&(t=this.getNoteByID(o.getAttribute("data-note-yuid")))&&t.canEdit&&(e.target.hasClass("note-drag-handle")?i={type:"resize",startX:e.clientX+window.pageXOffset,startY:e.clientY+window.pageYOffset,dragHandle:e.target,direction:e.target.getAttribute("data-drag-resize-direction")}:e.target.hasClass("note-clicked")&&(i={type:"move",startX:e.clientX+window.pageXOffset,startY:e.clientY+window.pageYOffset,dragHandle:e.target}),i&&this.enterState("dragging",{note:t,element:o,dragMetadata:i}))},handleEditingMouseUp:function(e){e.target.test("button")&&this.performButtonAction(e)},handleEditingKeyDown:function(e){var t=this.box.one(".note-clicked"),o=this.getNoteByID(t.getAttribute("data-note-yuid"));switch(e.keyCode){case 8:(e.ctrlKey||e.metaKey)&&window.confirm(this.intlMessage({intlName:"photo-page-scrappy.CONFIRM_NOTE_DELETION"}))&&(this.deleteNote(o,t),e.preventDefault());break;case 13:(e.ctrlKey||e.metaKey)&&(this.saveNoteEdits(o,t),e.preventDefault()),e.target.test("button")&&this.performButtonAction(e);break;case 27:this.cancelNoteEdits(o,t);break;case 32:e.target.test("button")&&this.performButtonAction(e)}},performButtonAction:function(e){var t=this.box.one(".note-clicked"),o=this.getNoteByID(t.getAttribute("data-note-yuid"));e.target.hasClass("save-note")?this.saveNoteEdits(o,t):e.target.hasClass("cancel-note")?this.cancelNoteEdits(o,t):e.target.hasClass("delete-note")&&window.confirm(this.intlMessage({intlName:"photo-page-scrappy.CONFIRM_NOTE_DELETION"}))&&this.deleteNote(o,t)},saveNoteEdits:function(e,t){var o=this.get("noteModel"),i=this;e.text=i.box.one(".note-text[data-for-note-yuid="+e.yuid+"] textarea").get("value").trim(),e.text&&(e.isStoredOnServer?(o.setValues(e.id,{left:e.x,top:e.y,width:e.w,height:e.h,text:e.text}),o.remoteUpdate(e.id).then(function(o){o&&(e.text=o.getValue("text")),i.deleteNoteBackup(),i.enterState("idle",{note:e,element:t,rerender:!0})},function(e){})):o.remoteCreate({photoId:e.photoId,left:e.x,top:e.y,width:e.w,height:e.h,text:e.text,author:e.author,authorName:e.authorName,authorRealName:e.authorRealName,authorIsPro:e.authorIsPro}).then(function(o){e.id=o.getValue("id"),e.text=o.getValue("text"),e.isStoredOnServer=!0,i.deleteNoteBackup(),i.enterState("idle",{note:e,element:t,rerender:!0})},function(e){}))},cancelNoteEdits:function(e,t){var o;e.isStoredOnServer?(o=this.getNoteBackup(),e.w=o.w,e.h=o.h,e.x=o.x,e.y=o.y,this.positionNote(e)):(this.notes.pop(),this.box.one("[data-note-yuid="+e.yuid+"]").remove(!0),e=null,t=null),this.deleteNoteBackup(),this.enterState("idle",{note:e,element:t})},deleteNote:function(e,t){var o,i=this,n=!1;this.get("noteModel").remoteDelete(e.id).then(function(s){for(t.remove(!0),o=i.notes.length-1;o>=0;o--)if(i.notes[o].id===e.id){n=!0;break}n&&i.notes.splice(o,1),i.deleteNoteBackup(),i.enterState("idle",{note:e,element:t})},function(e){})},beginDragging:function(t){this.draggingMemo=e.merge(t.dragMetadata,{note:t.note,noteAtStart:e.clone(t.note),element:t.element})},endDragging:function(e){this.box.removeClass("doing-initial-drag")},handleDraggingMouseMove:function(e){var t,o,i,n,s,a,h,r,d,l,g,u,c,p=19/this.ratio;if(t=this.draggingMemo.note,o=this.draggingMemo.startX-e.clientX-window.pageXOffset,i=this.draggingMemo.startY-e.clientY-window.pageYOffset,this.boxWidth>this.boxHeight?(u=500,c=500/(this.boxWidth/this.boxHeight)):(c=500,u=500/(this.boxHeight/this.boxWidth)),"resize"===this.draggingMemo.type){switch(this.draggingMemo.direction){case"tl":n=o/this.ratio*-1,a=o/this.ratio,s=i/this.ratio*-1,h=i/this.ratio;break;case"tr":n=0,a=o/this.ratio*-1,s=i/this.ratio*-1,h=i/this.ratio;break;case"br":n=0,a=o/this.ratio*-1,s=0,h=i/this.ratio*-1;break;case"bl":n=o/this.ratio*-1,a=o/this.ratio,s=0,h=i/this.ratio*-1}r=this.draggingMemo.noteAtStart.x+n,l=this.draggingMemo.noteAtStart.w+a,d=this.draggingMemo.noteAtStart.y+s,g=this.draggingMemo.noteAtStart.h+h,l<p&&(n&&(r=this.draggingMemo.noteAtStart.w+this.draggingMemo.noteAtStart.x-p),l=p),l+r>u&&(l=u-r),r<0&&(r=0,l=this.draggingMemo.noteAtStart.w+this.draggingMemo.noteAtStart.x),t.x=r,t.w=l,g<p&&(s&&(d=this.draggingMemo.noteAtStart.h+this.draggingMemo.noteAtStart.y-p),g=p),g+d>c&&(g=c-d),d<0&&(d=0,g=this.draggingMemo.noteAtStart.h+this.draggingMemo.noteAtStart.y),t.y=d,t.h=g}else"move"===this.draggingMemo.type&&(r=this.draggingMemo.noteAtStart.x-o/this.ratio,d=this.draggingMemo.noteAtStart.y-i/this.ratio,r<0&&(r=0),r+this.draggingMemo.noteAtStart.w>u&&(r=u-this.draggingMemo.noteAtStart.w),d<0&&(d=0),d+this.draggingMemo.noteAtStart.h>c&&(d=c-this.draggingMemo.noteAtStart.h),t.x=r,t.y=d);this.positionNote(t)},handleDraggingMouseUp:function(e){this.enterState("editing",{note:this.draggingMemo.note,element:this.draggingMemo.element})},storeNoteBackup:function(t){this.noteBeforeEdits||(this.noteBeforeEdits=e.clone(t))},getNoteBackup:function(){return this.noteBeforeEdits},deleteNoteBackup:function(){delete this.noteBeforeEdits},getNoteByID:function(e){return this.notes.find?this.notes.find(function(t){return t.yuid===e}):this.notes.filter(function(t){return t.yuid===e})[0]},renderNotes:function(){var t,o,i=this.getNoteBackup();i&&(t=e.clone(i.node.getDOMNode())),this.box.all(".note").remove(!0),this.notes.forEach(this.createNewNote.bind(this)),i&&((o=this.box.one("[data-note-yuid="+i.yuid+"]")).set("className",t.className),i.node=o)},createNewNote:function(t){t.node=e.Node.create('<span class="note" data-note-yuid="'+t.yuid+'"></span>'),t.canEdit&&t.node.addClass("note-can-edit"),this.box.append(t.node),this.positionNote(t)},positionNote:function(e){var t,o=e.getScaled(this.ratio);e.node.setStyles({left:o.x+"px",top:o.y+"px",width:o.w+"px",height:o.h+"px",zIndex:e.z}),(t=this.box.one(".note-text[data-for-note-yuid="+e.yuid+"]"))&&(t.setStyle("z-index",i),t.one(".text-alignment-fix").setStyles({left:o.x+"px",top:o.y+o.h+2+"px"}))},restackNotes:function(){this.notes.sort(function(e,t){return t.w*t.h-e.w*e.h}).forEach(function(e){e.z=i++})},syncWithPhoto:function(){var t=e.one(".photo-well-media-scrappy-view").getDOMNode(),o=parseInt(getComputedStyle(t).paddingTop,10),i=parseInt(getComputedStyle(t).paddingBottom,10),n=t.offsetWidth,s=t.offsetHeight-o-i,a=t.offsetLeft,h=t.offsetTop+o;this.box.setStyles({width:n+"px",height:s+"px",left:a+"px",top:h+"px"}),this.ratio=Math.max(n,s)/500,this.boxWidth=n,this.boxHeight=s,this.boxLeft=a,this.boxTop=h},hideHovered:function(){this.box.all(".note-hovered").removeClass("note-hovered"),this.box.all(".note-text:not(.adding)").remove(!0)},deactivate:function(){this.get("container").setStyle("display","none").remove()}})},"@VERSION@",{requires:["hermes-template-photo-note-read-mode","hermes-template-photo-note-write-mode","hermes-template-photo-note-drag-handles","flickr-view"],optional:["photo-notes-models","photo-models"],langBundles:["common","photo-page-scrappy"]});